---
layout: post
title: Docker 란? (1)
category: docker
---

# 도커란?

도커는 컨테이너 기술이다.<br>
**컨테이너**를 생성하고 관리하기 위한 도구이다. <br>

여기서 컨테이너가 의미하는 것은 무엇이며,
컨테이너는 언제, 왜 사용되는 것일까?

## 컨테이너 란?

소프트웨어 개발에서 **컨테이너**는 <u>표준화된 소프트웨어 유닛</u>이다.<br>
즉, 컨테이너란 코드 패키지(묶음)이고, 컨테이너엔 이 코드를 실행하는데 필요한 도구들이 포함되어 있다는 뜻이다.

예를 들면, 컨테이너는 "피크닉 바구니"라고 생각하면 된다.<br>
피크닉 바구니엔 접시, 포크, 음식, 돗자리가 모두 들어 있다.
피크닉 바구니만 있으면 피크닉을 즐길 준비가 완료된 것이다.

컨테이너도 마찬가지이다.
컨테이너 내부에 코드를 실행시킬 모든 것이 담겨 있기 때문에,
어떤 환경이라도 컨테이너만 있다면 원하는 코드를 실행 시킬 수 있다.

뿐만아니라, 컨테이너 내부의 도구들은 컨테이너 내에서만 동작하게 되어 있으며 외부의 영향을 받지 않아 항상 똑같은 버전과 똑같은 상태를 유지한다.<br>
이말인 즉, 코드를 구현하던 개발 환경과 코드를 실행시킬 배포 환경이 달라도 개발 환경과 동일한 버전의 도구(dependencies)들을 유지하며 코드를 실행시킬 수 있다.

컨테이너라는 용어는 생소할 수 있다.<br>
"컨테이너"라고 하면 항구에 쌓여있는 철제 컨테이너를 떠올리기 마련이다.<br>
실제로 도커의 컨테이너는 이 "컨테이너"라는 단어에서 차용한 것이 맞다.

"도커"는 항구에서 컨테이너를 관리하는 사람을 의미한다. <br>
항구에 쌓여있는 철제 컨테이너 또한 내부에 필요한 물건을 실을 수 있고, <br>
컨테이너 내부의 내용물은 크게 신경 쓰지 않고 "컨테이너"만 옮기면 된다는 점에서 앞서 설명한 소프트웨어상 컨테이너와 일치한다.

# 도커는 왜 사용할까?

컨테이너를 설명하면서 잠깐 언급했지만, 다시 말하자면<br>
결정적으로 <u>독립적이고, 표준화된 코드 패키지를 유지하기 위해서</u>이다.

예를 들면,<br>
Node.JS 어플리케이션을 구현했다고 가정해보자.

<script src="https://gist.github.com/doozi316/2169081bcb4f4ef9793a645984ee5431.js"></script>

내 로컬 컴퓨터에서 Node.JS 14.3 버전으로 성공적으로 위 코드를 작성했다. <br>
위 코드의 의미는 알 필요 없다. <br>
다만, `async`/`await` 라는 ES6 문법을 사용했기 때문에 이 코드를 실행시키기 위해서는 Node.JS 14.3 이상이 필요하다는 점만 알면 된다.

이 코드가 호스트 되어야하는 환경, 즉, 배포되어야하는 서버에 Node.JS 가 설치 되어 있지 않을 수도 있다.

이럴 경우, 내 로컬 컴퓨터에선 잘 동작하던 코드가 갑자기 배포 서버에선 동작하지 않는 문제가 생긴다.

지금은 Node.JS 라는 간단한 예제로 테스트 하여 원인을 쉽게 찾을 수 있지만,<br>
설치해야하는 도구들이 많을 경우에는 무엇이 문제인지 찾는 것조차 오랜 시간이 걸릴 수 있다.

동일한 버전의 도구를 가지고 있는 것,<br>
항상 정확한 버전으로 실행되는 <br>
**표준화된 코드 패키지**를 유지할 수 있게 하는 것이 바로 도커이다.

"배포 환경" 에 대한 예시만 언급했지만, 실제로는 좀 더 다양한 케이스에서도 도커가 빛을 발한다.<br>

예를 들면, 회사 내 구성원들의 각각의 개발환경이 다른 경우이다.<br>
동일한 프로젝트을 구현하고 있는 도중, 누군가가 Node.JS 버전을 업데이트 하고 커밋한 경우,
해당 프로젝트가 다른 구성원의 컴퓨터에서 동작하지 않을 수 있다.

또한, 한 프로젝트 뿐만 아니라 여러 프로젝트를 한 PC에서 개발할 때, 각각의 프로젝트가 서로 다른 Node.JS 버전이 필요한 경우에도 도커를 활용할 수 있다. <br>
**독립적인 코드 패키지**를 유지할 수 있다는 도커의 장점 덕에 문제 없이 서로 다른 버전의 프로젝트를 구현할 수 있다.

# 굳이 도커를 써야할까?

개발을 조금 해본 사람들이라면, 앞서 설명한 도커의 장점을 보고 "버츄얼 머신(VM)으로도 할 수 있지 않나? VM으로도 독립적인 환경을 구성해서 사용할 수 있는데 굳이 도커를 써야하나?" 라고 생각할 수 있다.

버츄얼 머신(Virtual Machine)은 컴퓨터 내의 가상 컴퓨터이다. <br>
가상으로 존재하지만 다른 머신이기 때문에 우린 거기에 일반 컴퓨터처럼 원하는 무엇이든 설치할 수 있다.

따라서 프로그램에 필요한 모든 도구가 포함된 캡슐화된 버츄얼 머신이기 때문에 도커, 컨테이너와 똑같은 결과를 얻을 수 있다.

서로 다른 프로젝트에 대해 여러 VM 을 설치해서 다른 환경을 만들어 운용할 수 있고, 머신 구성을 동료와 공유하여 동일한 환경에서 작업도 가능하다.

하지만 VM 의 문제는 가상 운영체제로 인해 발생하는 오버헤드이다.

모든 VM 은 실제 컴퓨터 위에서 실행되는 또다른 컴퓨터이다.<br>
따라서, 이런 가상 머신이 여러대 있는 경우, 매번 새로운 컴퓨터를 내부에 설치해야하고 메모리, CPU, 하드웨어 드라이브 공간을 낭비하게 된다.
시스템에 VM 이 점점 더 많아진다면 문제가 될 것이다.

특히 OS 로 인한 문제가 크다.<br>
서로 다른 프로젝트에 모두 동일하게 리눅스 OS 환경이 필요하다해도,
각각 다른 VM 에 모두 리눅스를 설치해야한다.
이건 굉장히 많은 공간을 낭비하게 된다.

그리고 프로젝트에 딱히 필요하지 않은 VM 의 많은 다른 도구들이 설치되어 있어 불필요하게 공간을 많이 차지하게 된다.

요약하자면, 도커 대신 VM 을 사용하는 것엔 몇가지 장단점이 있다.<br>

-   장점
    -   분리된 환경(VM)을 생성할 수 있다.
    -   환경(VM) 별 서로 다른 구성을 가질 수 있다.
    -   같은 환경을 안정적으로 공유, 재생산 할 수 있다.
-   단점
    -   낭비되는 자원이 발생한다.
    -   호스트 시스템 위에 추가 시스템이 실행되고 있기 때문에 성능이 나빠질 수 있다.
    -   재생산, 공유가 가능하더라도 원하는 모든 시스템에 VM 을 설치/설정하고 동일한 방식으로 구성해야하기 때문에 설치 과정이 까다로울 수 있다.
    -   공유할 수 있는 단일 구성파일이 없다.
    -   프로젝트를 배포하려면 VM 과 동일한 방식으로 배포환경을 구성해야한다.

이것이 우리가 도커를 굳이 사용해야하는 이유이다.<br>
